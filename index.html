<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio Web</title>
    <link rel="stylesheet" href="estilos.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Azeret+Mono:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
</head>

<body>

    <!-- CONTENIDO EN GRILLA -->
    <main class="page">

        <!-- NOMBRE -->
        <div class="name">
            Juan Millot
        </div>

        <!-- SIDEBAR / MENU -->
        <aside class="sidebar">

            <a href="#" class="menu-toggle">Proyectos</a>

            <nav class="menu">
                <a href="#revista" data-img="img/revista.webp">
                    Revista completa <br><span>Diseño en el ciclismo</span>
                </a>

                <a href="#digital6" data-img="img/proyecto6.png">
                    Proyecto Final Diseño Digital 6
                </a>

                <a href="#motion20syl" data-img="img/motion20syl.webp">
                    Motion 20syl
                </a>

                <a href="#sloppy" data-img="img/sloppy.png">
                    Sloppy
                </a>
            </nav>
        </aside>

        <!-- TEXTO PRINCIPAL -->
        <section class="text">
            <p>
                Soy Juan, diseñador gráfico con foco en motion graphics,
                diseño editorial e identidad visual. Mi trabajo parte de
                un enfoque versátil y de un criterio visual claro, entendiendo
                el diseño como un proceso que se construye a través de la prueba,
                la iteración y el ajuste fino. Disfruto especialmente explorar variantes
                y pulir detalles, dedicando tiempo a encontrar soluciones que se sostengan
                tanto a nivel conceptual como formal. Trabajo de manera independiente y
                en colaboración, adaptándome a distintas dinámicas según el proyecto,
                y priorizando siempre la claridad y la coherencia del sistema gráfico.
                Me interesa desarrollar propuestas que admitan distintos niveles de complejidad
                y exploración, alejándome de resoluciones inmediatas cuando el proyecto lo permite.
                Aspiro a que cada trabajo refleje una mirada consistente, con la intención de construir
                un lenguaje propio reconocible a lo largo del tiempo. En este portfolio se reúnen
                proyectos de diversas áreas y formatos, incluyendo trabajos vinculados al ciclismo,
                así como exploraciones en ilustración y diseño digital.
            </p>
        </section>

        <!-- IMAGEN -->
        <figure class="photo">
            <img src="img/Foto Figma.webp" alt="Proyecto destacado">
        </figure>

        <!-- HEADER FIJO INFERIOR -->
        <header class="header">
            <div class="header-inner">
                <a href="index.html"><img class="logo" src="img/Portfolio2.gif" alt="GIF"></a>
                <span class="numero">+598 91 400 178</span>
                <span class="mail">jj.millotc@gmail.com</span>
                <a class="ig" href="https://www.instagram.com/jj.millot/"><span>@jj.millot</span></a>
            </div>
        </header>

    </main>

    <!-- SECCION PROYECTOS -->
    <section class="projects">

        <!-- Proyecto 1: Revista completa -->
        <div id="revista" class="project project-revista">
            <div class="revista-slider">
                <img src="img/Revista/doble1.webp" alt="Doble 1">
            </div>

            <button class="prev">&#10094;</button>
            <button class="next">&#10095;</button>

            <div class="project-info">
                <h2>Revista completa</h2>
                <p>Diseño en el ciclismo</p>
            </div>
        </div>

        <!-- Proyecto 2 -->
        <div id="digital6" class="project">
            <video src="video/digital6.mp4" loop controls></video>
            <div class="project-info">
                <h2>Proyecto final Diseño Digital 6</h2>
                <p>Video de entrega final del curso</p>
            </div>
        </div>

        <!-- Proyecto 3 -->
        <div id="motion20syl" class="project">
            <video src="video/20syl.mp4" loop controls></video>
            <div class="project-info">
                <h2>Motion 20syl</h2>
                <p>Video entrega de curso Diseño Digital 6</p>
            </div>
        </div>

        <!-- Proyecto 4 -->
        <div id="sloppy" class="project">
            <video src="video/sloppy.mp4" autoplay muted loop></video>
            <div class="project-info">
                <h2>Sloppy</h2>
                <p>Video presentación de estudio de diseño <i>Sloppy</i></p>
            </div>
        </div>

    </section>

    <!-- PREVIEW FLOTANTE -->
    <div class="preview-image"></div>

    <!-- SCRIPT -->
    <script>
        // =========================
        // MENU TOGGLE Y DIMMED
        // =========================
        const toggle = document.querySelector(".menu-toggle");
        const sidebar = document.querySelector(".sidebar");
        const page = document.querySelector(".page");

        const elementsToDim = Array.from(page.children).filter(el => el !== sidebar);

        toggle.addEventListener("click", (e) => {
            e.preventDefault();
            sidebar.classList.toggle("active");
            elementsToDim.forEach(el => el.classList.toggle("dimmed"));
        });

        // =========================
        // PREVIEW FLOTANTE
        // =========================
        const menuLinks = document.querySelectorAll('.sidebar .menu a');
        const preview = document.querySelector('.preview-image');

        menuLinks.forEach(link => {
            link.addEventListener('mouseenter', () => {
                const imgSrc = link.getAttribute('data-img');
                preview.style.backgroundImage = `url(${imgSrc})`;
                preview.style.opacity = '1';
            });

            link.addEventListener('mousemove', (e) => {
                const offsetX = 20;
                const offsetY = 20;
                preview.style.left = e.clientX + offsetX + 'px';
                preview.style.top = e.clientY + offsetY + 'px';
            });

            link.addEventListener('mouseleave', () => {
                preview.style.opacity = '0';
            });
        });

        // =========================
        // ANIMACION INICIAL DE CARGA
        // =========================
        window.addEventListener('load', () => {
            page.classList.add('loaded');
        });

        // =========================
        // SCROLL BACKGROUND + GIF HEADER
        // =========================
        const projects = document.querySelector('.projects');
        const headerGif = document.querySelector('.header .logo'); // tu GIF del header

        window.addEventListener('scroll', () => {
            const scrollThreshold = 500; // tu umbral actual

            if (window.scrollY > scrollThreshold) {
                page.classList.add('scrolled');
                projects.classList.add('scrolled');

                // Cambiar GIF solo si el elemento existe
                if (headerGif) headerGif.src = "img/Portfolio.gif";
            } else {
                page.classList.remove('scrolled');
                projects.classList.remove('scrolled');

                // Volver al GIF original
                if (headerGif) headerGif.src = "img/Portfolio2.gif";
            }
        });


        // SLIDER REVISTA - LOOP SIN DELAY
        // =========================

        // Genera automáticamente la lista de imágenes
        const totalPages = 60; // cantidad de dobles páginas
        const images = [];

        // Agrega las dobles páginas
        for (let i = 1; i <= totalPages; i++) {
            images.push(`img/Revista/doble${i}.webp`);
        }

        // Agrega la contratapa
        images.push('img/Revista/contratapa.webp');

        let currentIndex = 0;

        // Selección de elementos
        const sliderImg = document.querySelector('.revista-slider img');
        const prevBtn = document.querySelector('.project-revista .prev');
        const nextBtn = document.querySelector('.project-revista .next');

        // Inicializamos la imagen
        sliderImg.src = images[currentIndex];

        // Función para cambiar imagen inmediatamente
        function showImage(index) {
            sliderImg.src = images[index];
        }

        // Flecha siguiente
        nextBtn.addEventListener('click', () => {
            currentIndex++;
            if (currentIndex >= images.length) currentIndex = 0; // loop
            showImage(currentIndex);
        });

        // Flecha anterior
        prevBtn.addEventListener('click', () => {
            currentIndex--;
            if (currentIndex < 0) currentIndex = images.length - 1; // loop
            showImage(currentIndex);
        });

        /* NUEVO */

        const sidebarLinks = document.querySelectorAll('.sidebar .menu a');

        sidebarLinks.forEach(link => {
            link.addEventListener('click', () => {

                // cerrar sidebar
                sidebar.classList.remove('active');

                // quitar opacidad a todo
                elementsToDim.forEach(el => el.classList.remove('dimmed'));

            });
        });


    </script>

</body>

</html>